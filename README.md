# pape_r
Code Supplement for PAPE paper

# Installation instruction

In order to run the code provided follow the instructions below.

First install `conda` in a way appropriate for your computer. Then run the following code:

```
$ conda create -n pape python=3.11
$ conda activate pape
$ pip install -r requirements.txt
```

To run notebooks, activate the conda environment with `conda activate pape`, go to location of this file and start jupyterlab by running the
`jupyter-lab` command.

# Reproducing paper results with single script

In order to reproduce the paper results all you need is to run the following command from the root of the repository.

```
$ python run_all.py
```
This assumes that you have successfully completed the installation steps. When you run this:
* `datasets` will populate with preprocessed datasets .pq files and metadata .json files,
* `experiment_results` and `sample_size_experiment_results` will contain the .pq files with results of the experiments,
* notebooks `results_01_main_results.ipynb` and `results_02_sample_size_effect_results.ipynb` will contain the analysis of the results,
* `figures` will contain figures generated by the notebooks mentioned above
	

# Reproducing paper results step by step

If you wish to manually go through the steps to reproduce the experiments, then:

1. Run the dataset creation script:
```
$ python create.py
```
It will create the datasets specified at the end `create.py` and save them in the `datasets` folder.
Feel free to commment/uncomment relevant parts of the script if you want to.

2. Run the calculation notebooks:
	* main experiment notebooks: `1_run_main_experiments.ipynb`, `2_calculate_main_experiments_standard_error.ipynb`
	* sample size effect experiment notebooks: `3_run_sample_size_effect_experiment.ipynb`, `4_calculate_sample_size_effect_standard_errors.ipynb`.

3. Run the notebooks that analyze the results:
	* main experiment results: `results_01_main_results.ipynb`
	* sample size effect experiment results: `results_02_sample_size_effect_results.ipynb` 

The results will be qualitatively the same as the ones shown in the paper. 
Insignificant differences may come from not fixing all the random states of some of the random processes involved.

# Working on the experiment results supplied

We have supplied the results files of the experiments we have run for the paper. This is the outcome of running steps 1 and 2 from the instruction above.
They are present in the `experiment_results` folder. If you want to evaluate them on your own, go directly to notebooks:

- `results_01_main_results.ipynb`
- `results_02_sample_size_effect_results.ipynb`

The first one contains the main experiment results, based on which `Table 1`, `Figure 1` and `Figure 2` were generated. 
The main paper claims are based on these results. It uses data from `experiment_results` folder.
The second contains sample size experiment results and can be used to recreate `Figure 3`. It uses data from the `sample_size_experiment_results` folder.

# Exploring the performance estimation methods

If you wish to experiment with the evaluated performance estimation methods, open the `example_performance_estimation_and_evaluation.ipynb` notebook. 
It works on the example dataset provided (from `example_dataset` folder) and allows to quickly recreate `Figure 1` from the paper.
